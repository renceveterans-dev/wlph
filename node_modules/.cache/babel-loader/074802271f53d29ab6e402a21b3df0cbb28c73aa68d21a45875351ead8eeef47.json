{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport { onMounted, ref, shallowRef, toRef } from 'vue';\nimport api from '@/services/api';\nexport default {\n  __name: 'BookingView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const bookings = ref([]);\n    const loading = ref(false);\n    const error = ref(null);\n    const fetchBookings = async () => {\n      loading.value = true;\n      error.value = null;\n      try {\n        const response = await api.get('/api_getall_bookings.php');\n        bookings.value = response.data;\n      } catch (err) {\n        error.value = err.message || 'Failed to load data';\n      } finally {\n        loading.value = false;\n      }\n    };\n    const currentYear = new Date().getFullYear();\n    function createNewRecord() {\n      return {\n        title: '',\n        author: '',\n        genre: '',\n        year: currentYear,\n        pages: 1\n      };\n    }\n    const books = ref([]);\n    const formModel = ref(createNewRecord());\n    const dialog = shallowRef(false);\n    const isEditing = toRef(() => !!formModel.value.id);\n    const headers = [{\n      title: 'Title',\n      key: 'title',\n      align: 'start'\n    }, {\n      title: 'Author',\n      key: 'author'\n    }, {\n      title: 'Genre',\n      key: 'genre'\n    }, {\n      title: 'Year',\n      key: 'year',\n      align: 'end'\n    }, {\n      title: 'Pages',\n      key: 'pages',\n      align: 'end'\n    }, {\n      title: 'Actions',\n      key: 'actions',\n      align: 'end',\n      sortable: false\n    }];\n    onMounted(() => {\n      reset();\n      fetchBookings();\n    });\n    function add() {\n      formModel.value = createNewRecord();\n      dialog.value = true;\n    }\n    function edit(id) {\n      const found = books.value.find(book => book.id === id);\n      formModel.value = {\n        id: found.id,\n        title: found.title,\n        author: found.author,\n        genre: found.genre,\n        year: found.year,\n        pages: found.pages\n      };\n      dialog.value = true;\n    }\n    function remove(id) {\n      const index = books.value.findIndex(book => book.id === id);\n      books.value.splice(index, 1);\n    }\n    function save() {\n      if (isEditing.value) {\n        const index = books.value.findIndex(book => book.id === formModel.value.id);\n        books.value[index] = formModel.value;\n      } else {\n        formModel.value.id = books.value.length + 1;\n        books.value.push(formModel.value);\n      }\n      dialog.value = false;\n    }\n    function reset() {\n      dialog.value = false;\n      formModel.value = createNewRecord();\n      books.value = [{\n        id: 1,\n        title: 'To Kill a Mockingbird',\n        author: 'Harper Lee',\n        genre: 'Fiction',\n        year: 1960,\n        pages: 281\n      }, {\n        id: 2,\n        title: '1984',\n        author: 'George Orwell',\n        genre: 'Dystopian',\n        year: 1949,\n        pages: 328\n      }, {\n        id: 3,\n        title: 'The Great Gatsby',\n        author: 'F. Scott Fitzgerald',\n        genre: 'Fiction',\n        year: 1925,\n        pages: 180\n      }, {\n        id: 4,\n        title: 'Sapiens',\n        author: 'Yuval Noah Harari',\n        genre: 'Non-Fiction',\n        year: 2011,\n        pages: 443\n      }, {\n        id: 5,\n        title: 'Dune',\n        author: 'Frank Herbert',\n        genre: 'Sci-Fi',\n        year: 1965,\n        pages: 412\n      }];\n    }\n    const __returned__ = {\n      bookings,\n      loading,\n      error,\n      fetchBookings,\n      currentYear,\n      createNewRecord,\n      books,\n      formModel,\n      dialog,\n      isEditing,\n      headers,\n      add,\n      edit,\n      remove,\n      save,\n      reset,\n      onMounted,\n      ref,\n      shallowRef,\n      toRef,\n      get api() {\n        return api;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["onMounted","ref","shallowRef","toRef","api","bookings","loading","error","fetchBookings","value","response","get","data","err","message","currentYear","Date","getFullYear","createNewRecord","title","author","genre","year","pages","books","formModel","dialog","isEditing","id","headers","key","align","sortable","reset","add","edit","found","find","book","remove","index","findIndex","splice","save","length","push"],"sources":["C:/Users/lvegerano/Documents/Laurence/wlph-app/wlph-app/src/views/BookingView.vue"],"sourcesContent":["<template>\r\n    <v-container>\r\n        <h1>Bookings</h1>\r\n\r\n        <v-divider class=\"mt-2\"></v-divider>\r\n\r\n        <v-sheet class=\"mt-4\" border rounded>\r\n\r\n            <v-data-table :headers=\"headers\" :hide-default-footer=\"books.length < 11\" :items=\"books\">\r\n                <template v-slot:top>\r\n                    <v-toolbar flat>\r\n                        <v-toolbar-title>\r\n                            <v-icon color=\"medium-emphasis\" icon=\"mdi-book-multiple\" size=\"x-small\" start></v-icon>\r\n\r\n                            Booking List\r\n                        </v-toolbar-title>\r\n\r\n                        <v-btn class=\"me-2\" prepend-icon=\"mdi-plus\" rounded=\"lg\" text=\"Add Booking\" border\r\n                            @click=\"add\"></v-btn>\r\n                    </v-toolbar>\r\n                </template>\r\n\r\n                <template v-slot:[`item.title`]=\"{ value }\">\r\n                    <v-chip :text=\"value\" border=\"thin opacity-25\" prepend-icon=\"mdi-book\" label>\r\n                        <template v-slot:prepend>\r\n                            <v-icon color=\"medium-emphasis\"></v-icon>\r\n                        </template>\r\n                    </v-chip>\r\n                </template>\r\n\r\n                <template v-slot:[`item.action`]=\"{ item }\">\r\n                    <div class=\"d-flex ga-2 justify-end\">\r\n                        <v-icon color=\"medium-emphasis\" icon=\"mdi-pencil\" size=\"small\" @click=\"edit(item.id)\"></v-icon>\r\n\r\n                        <v-icon color=\"medium-emphasis\" icon=\"mdi-delete\" size=\"small\"\r\n                            @click=\"remove(item.id)\"></v-icon>\r\n                    </div>\r\n                </template>\r\n\r\n                <template v-slot:no-data>\r\n                    <v-btn prepend-icon=\"mdi-backup-restore\" rounded=\"lg\" text=\"Reset data\" variant=\"text\" border\r\n                        @click=\"reset\"></v-btn>\r\n                </template>\r\n            </v-data-table>\r\n        </v-sheet>\r\n\r\n        <v-dialog v-model=\"dialog\" max-width=\"500\">\r\n            <v-card :subtitle=\"`${isEditing ? 'Update' : 'Create'} your favorite book`\"\r\n                :title=\"`${isEditing ? 'Edit' : 'Add'} a Book`\">\r\n                <template v-slot:text>\r\n                    <v-row>\r\n                        <v-col cols=\"12\">\r\n                            <v-text-field v-model=\"formModel.title\" label=\"Title\"></v-text-field>\r\n                        </v-col>\r\n\r\n                        <v-col cols=\"12\" md=\"6\">\r\n                            <v-text-field v-model=\"formModel.author\" label=\"Author\"></v-text-field>\r\n                        </v-col>\r\n\r\n                        <v-col cols=\"12\" md=\"6\">\r\n                            <v-select v-model=\"formModel.genre\"\r\n                                :items=\"['Fiction', 'Dystopian', 'Non-Fiction', 'Sci-Fi']\" label=\"Genre\"></v-select>\r\n                        </v-col>\r\n\r\n                        <v-col cols=\"12\" md=\"6\">\r\n                            <v-number-input v-model=\"formModel.year\" :max=\"currentYear\" :min=\"1\"\r\n                                label=\"Year\"></v-number-input>\r\n                        </v-col>\r\n\r\n                        <v-col cols=\"12\" md=\"6\">\r\n                            <v-number-input v-model=\"formModel.pages\" :min=\"1\" label=\"Pages\"></v-number-input>\r\n                        </v-col>\r\n                    </v-row>\r\n                </template>\r\n\r\n                <v-divider></v-divider>\r\n\r\n                <v-card-actions class=\"bg-surface-light\">\r\n                    <v-btn text=\"Cancel\" variant=\"plain\" @click=\"dialog = false\"></v-btn>\r\n\r\n                    <v-spacer></v-spacer>\r\n\r\n                    <v-btn text=\"Save\" @click=\"save\"></v-btn>\r\n                </v-card-actions>\r\n            </v-card>\r\n        </v-dialog>\r\n\r\n\r\n    </v-container>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, ref, shallowRef, toRef } from 'vue'\r\nimport api from '@/services/api'\r\n\r\nconst bookings = ref([])\r\nconst loading = ref(false)\r\nconst error = ref(null)\r\n\r\nconst fetchBookings = async () => {\r\n  loading.value = true\r\n  error.value = null\r\n\r\n  try {\r\n    const response = await api.get('/api_getall_bookings.php')\r\n    bookings.value = response.data\r\n  } catch (err) {\r\n    error.value = err.message || 'Failed to load data'\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nconst currentYear = new Date().getFullYear()\r\n\r\nfunction createNewRecord() {\r\n    return {\r\n        title: '',\r\n        author: '',\r\n        genre: '',\r\n        year: currentYear,\r\n        pages: 1,\r\n    }\r\n}\r\n\r\nconst books = ref([])\r\nconst formModel = ref(createNewRecord())\r\nconst dialog = shallowRef(false)\r\nconst isEditing = toRef(() => !!formModel.value.id)\r\n\r\nconst headers = [\r\n    { title: 'Title', key: 'title', align: 'start' },\r\n    { title: 'Author', key: 'author' },\r\n    { title: 'Genre', key: 'genre' },\r\n    { title: 'Year', key: 'year', align: 'end' },\r\n    { title: 'Pages', key: 'pages', align: 'end' },\r\n    { title: 'Actions', key: 'actions', align: 'end', sortable: false },\r\n]\r\n\r\nonMounted(() => {\r\n    reset()\r\n    fetchBookings()\r\n})\r\n\r\nfunction add() {\r\n    formModel.value = createNewRecord()\r\n    dialog.value = true\r\n}\r\n\r\nfunction edit(id) {\r\n    const found = books.value.find(book => book.id === id)\r\n\r\n    formModel.value = {\r\n        id: found.id,\r\n        title: found.title,\r\n        author: found.author,\r\n        genre: found.genre,\r\n        year: found.year,\r\n        pages: found.pages,\r\n    }\r\n\r\n    dialog.value = true\r\n}\r\n\r\nfunction remove(id) {\r\n    const index = books.value.findIndex(book => book.id === id)\r\n    books.value.splice(index, 1)\r\n}\r\n\r\nfunction save() {\r\n    if (isEditing.value) {\r\n        const index = books.value.findIndex(book => book.id === formModel.value.id)\r\n        books.value[index] = formModel.value\r\n    } else {\r\n        formModel.value.id = books.value.length + 1\r\n        books.value.push(formModel.value)\r\n    }\r\n\r\n    dialog.value = false\r\n}\r\n\r\nfunction reset() {\r\n    dialog.value = false\r\n    formModel.value = createNewRecord()\r\n    books.value = [\r\n        { id: 1, title: 'To Kill a Mockingbird', author: 'Harper Lee', genre: 'Fiction', year: 1960, pages: 281 },\r\n        { id: 2, title: '1984', author: 'George Orwell', genre: 'Dystopian', year: 1949, pages: 328 },\r\n        { id: 3, title: 'The Great Gatsby', author: 'F. Scott Fitzgerald', genre: 'Fiction', year: 1925, pages: 180 },\r\n        { id: 4, title: 'Sapiens', author: 'Yuval Noah Harari', genre: 'Non-Fiction', year: 2011, pages: 443 },\r\n        { id: 5, title: 'Dune', author: 'Frank Herbert', genre: 'Sci-Fi', year: 1965, pages: 412 },\r\n    ]\r\n}\r\n</script>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}